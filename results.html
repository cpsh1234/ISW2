<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>8values Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = "Test Edition #1" //Remember to update this before making changes to the test itself!
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>MHoC ISideWith</h1>
<hr>

<h1>Results</h1>

<h2>Labour Axis: <span class="weight-300" id="labour-label"></span></h2>
<div class="axis">
    <img id="img-lab" src="value_images/lab.png" height="128pt"/>
    <div class="bar labour" id="bar-labour"><div class="text-wrapper" id="labour"></div></div>
    <div class="bar nlabour" id="bar-nlabour"><div class="text-wrapper" id="nlabour"></div></div>
</div>
<h2>Conservative Axis: <span class="weight-300" id="conservative-label"></span></h2>
<div class="axis">
    <img id="img-con" src="value_images/cons.png" height="128pt"/>
    <div class="bar conservative" id="bar-conservative"><div class="text-wrapper" id="conservative"></div></div>
    <div class="bar nconservative" id="bar-nconservative"><div class="text-wrapper" id="nconservative"></div></div>
</div>
<h2>Lib Dem Axis: <span class="weight-300" id="ld-label"></span></h2>
<div class="axis">
    <img id="img-ld" src="value_images/ld.png" height="128pt"/>
    <div class="bar libdem" id="bar-libdem"><div class="text-wrapper" id="libdem"></div></div>
    <div class="bar nlibdem" id="bar-nlibdem"><div class="text-wrapper" id="nlibdem"></div></div>
</div>
<h2>Libertarian Axis: <span class="weight-300" id="lib-label"></span></h2>
<div class="axis">
    <img id="img-lib" src="value_images/lib.png" height="128pt"/>
    <div class="bar libertarian" id="bar-libertarian"><div class="text-wrapper" id="libertarian"></div></div>
    <div class="bar nlibertarian" id="bar-nlibertarian"><div class="text-wrapper" id="libertarian"></div></div>
</div>
<h2>Citizen Axis: <span class="weight-300" id="cit-label"></span></h2>
<div class="axis">
    <img id="img-cit" src="value_images/cit.png" height="128pt"/>
    <div class="bar citizen" id="bar-citizen"><div class="text-wrapper" id="citizen"></div></div>
    <div class="bar ncitizen" id="bar-ncitizen"><div class="text-wrapper" id="ncitizen"></div></div>
</div>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='index.html';" style="background-color: #2196f3;">Back</button> <br>

<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    labArray = ["Arch-Labour","Labour leaning","Swinging labour","Probably not Labour","Anti-Labour"]
    conArray = ["Arch-Tory","Tory leaning","Swinging Conservative","Probably not a Tory","Anti-Tory"]
    ldArray = ["Arch-Lib Dem","Lib Dem leaning","Swinging Lib Dem","Probably not a Lib Dem","Anti-Lib Dem"]
    libArray = ["Arch-Libertarian","Libertarian leaning","Swinging Libertarian","Probably not a Libertarian","Anti-Libertarian"]
    citArray = ["Arch-Citizen","Citizen leaning","Swinging Citizen","Probably not a Citizen","Anti-Citizen"]

    function setLabel(val,ary) {
        if (val > 100) { return "" } else
        if (val > 90) { return ary[0] } else
        if (val > 75) { return ary[1] } else
        if (val > 50) { return ary[2] } else
        if (val >= 25) { return ary[3] } else
        if (val >= 0) { return ary[4] } else
        	{return ""}
    }

    labour  		= getQueryVariable("a")
    conservative    = getQueryVariable("b")
    libdem   		= getQueryVariable("c")
    libertarian 	= getQueryVariable("d")
    citizen    		= getQueryVariable("e")
    nlabour     	= (100 - labour   ).toFixed(1)
    nconservative 	= (100 - conservative ).toFixed(1)
    nlibdem 		= (100 - libdem).toFixed(1)
    nlibertarian 	= (100 - libertarian ).toFixed(1)
    ncitizen 		= (100 - citizen).toFixed(1)

    setBarValue("Labour", labour)
    setBarValue("Conservative", conservative)
    setBarValue("Lib Dem", libdem)
    setBarValue("Libertarian", libertarian)
    setBarValue("Citizen", citizen)
    setBarValue("nLabour", nlabour)
    setBarValue("nConservative", nconservative)
    setBarValue("nLibdem", nlibdem)
    setBarValue("nLibertarian", nlibertarian)
    setBarValue("nCitizen", ncitizen)

    document.getElementById("labour-label").innerHTML = setLabel(labour, labArray)
    document.getElementById("conservative-label").innerHTML = setLabel(conservative, conArray)
    document.getElementById("ld-label").innerHTML = setLabel(libdem, ldArray)
    document.getElementById("lib-label").innerHTML = setLabel(libertarian, libArray)
	document.getElementById("cit-label").innerHTML = setLabel(citizen, citArray)

    function createImage(src, x, y, w, h) {
        img = new Image ()
        img.src = src
        img.onLoad = function() {
            ctx.drawImage(img, x, y, w, h)
        }
    }

    window.onload = function() {
        var c = document.createElement("canvas")
        var ctx = c.getContext("2d")
        c.width = 800;
        c.height = 770;
        ctx.fillStyle = "#EEEEEE"
        ctx.fillRect(0,0,800,770);

        img = document.getElementById("img-lab")
        ctx.drawImage(img, 20, 170, 100, 100);
        img = document.getElementById("img-con")
        ctx.drawImage(img, 20, 290, 100, 100)
        img = document.getElementById("img-ld")
        ctx.drawImage(img, 20, 410, 100, 100)
        img = document.getElementById("img-lib")
        ctx.drawImage(img, 20, 530, 100, 100)
		img = document.getElementById("img-cit")
        ctx.drawImage(img, 20, 650, 100, 100)

        ctx.fillStyle="#222222"
        ctx.fillRect(120, 180, 560, 80)
        ctx.fillRect(120, 300, 560, 80)
        ctx.fillRect(120, 420, 560, 80)
        ctx.fillRect(120, 540, 560, 80)
		ctx.fillRect(120, 660, 560, 80)
        ctx.fillStyle="#ff0000"
        ctx.fillRect(120, 184, 5.6*labour-2, 72)
        ctx.fillStyle="#000000"
        ctx.fillRect(682-5.6*nlabour, 184, 5.6*nlabour-2, 72)
        ctx.fillStyle="#0000ff"
        ctx.fillRect(120, 304, 5.6*conservative-2, 72)
        ctx.fillStyle="#000000"
        ctx.fillRect(682-5.6*nconservative, 304, 5.6*nconservative-2, 72)
        ctx.fillStyle="#ffff00"
        ctx.fillRect(120, 424, 5.6*libdem-2, 72)
        ctx.fillStyle="#000000"
        ctx.fillRect(682-5.6*nlibdem, 424, 5.6*nlibdem-2, 72)
        ctx.fillStyle="#ffb300"
        ctx.fillRect(120, 544, 5.6*libertarian-2, 72)
        ctx.fillStyle="#000000"
        ctx.fillRect(682-5.6*nlibertarian, 544, 5.6*nlibertarian-2, 72)
		ctx.fillStyle="#ff00ff"
        ctx.fillRect(120, 664, 5.6*citizen-2, 72)
        ctx.fillStyle="#000000"
        ctx.fillRect(682-5.6*ncitizen, 664, 5.6*ncitizen-2, 72)
        ctx.fillStyle="#222222"
        ctx.font="700 80px Montserrat"
        ctx.textAlign="left"
        ctx.fillText("8values", 20, 90)
        ctx.font="50px Montserrat"

        ctx.textAlign="left"
        if (labour  > 30) {ctx.fillText(labour + "%", 130, 237.5)}
        if (conservative     > 30) {ctx.fillText(conservative + "%", 130, 357.5)}
        if (libdem   > 30) {ctx.fillText(libdem + "%", 130, 477.5)}
        if (libertarian > 30) {ctx.fillText(libertarian + "%", 130, 597.5)}
		if (citizen > 30) {ctx.fillText(citizen + "%", 130, 717.5)}
        ctx.textAlign="right"
        if (nlabour    > 30) {ctx.fillText(nlabour + "%", 670, 237.5)}
        if (nconservative     > 30) {ctx.fillText(nconservative + "%", 670, 357.5)}
        if (nlibdem > 30) {ctx.fillText(nlibdem + "%", 670, 477.5)}
        if (nlibertarian  > 30) {ctx.fillText(nlibertarian + "%", 670, 597.5)}
		if (ncitizen  > 30) {ctx.fillText(ncitizen + "%", 670, 717.5)}

        ctx.font="300 30px Montserrat"
        ctx.fillText("MHoC ISideWith.github.io", 780, 60)
		ctx.fillText(version, 780, 90)
        ctx.textAlign="center"
        ctx.fillText("Labour Axis: " + document.getElementById("labour-label").innerHTML, 400, 175)
        ctx.fillText("Consevative Axis: " + document.getElementById("conservative-label").innerHTML, 400, 295)
        ctx.fillText("Lib Dem Axis: " + document.getElementById("ld-label").innerHTML, 400, 415)
        ctx.fillText("Libertarian Axis: " + document.getElementById("lib-label").innerHTML, 400, 535)
		ctx.fillText("Citizen Axis: " + document.getElementById("cit-label").innerHTML, 400, 655)

        document.getElementById("banner").src = c.toDataURL();
    }
    </script>
</body>
